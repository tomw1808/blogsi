<link rel="stylesheet" ng-href="{{basepath}}styles/main.css"><!-- Full Page Image Header Area --><div id="top" class="header img-106H"><div class="vert-text"><img src="images/c48da7c7.logo.png" alt="Logo" class="logo_size"><h1>Angular ToDo App with Zend and Pimcore</h1><h3>Part 1. Setup.</h3></div></div><!-- /Full Page Image Header Area --><!-- Intro --><div id="about" class="intro"><div class="container"><div class="row"><div class="col-md-6 col-md-offset-3"><h2 class="headliner">Angular you say? With Zend? ... and What?</h2><p class="lead">A short introduction</p><p>If you are like me, then you are fairly new to Javascript, Angular and things with fancy names like bower, yeoman, grunt, etc. The last time I was <em>really trying</em> to program something in JS was about the same time when I was happy about the Plus! Package for Windows 95. So here we go, dive with me a little bit into the world of JavaScript. I don't want to say that I'm a pro, neither do I want to say that the way I build things is the only way to do it. What I want is just to lay open how I handle my Projects and maybe, if you want, please feel free to leave a comment if you think I'm doing it wrong, or if you have any other remarks. I would be more than happy to hear your opinion!</p><br><p class="lead">Content</p><p>What I will cover here is a short introduction to get you started. I want to lay out what I am planning to do and how I want my things to interact. It should give a fairly good idea how to start a project and so on. The outcome will be a one-page app, a classic todo list manager, with a landingpage. Underneath is a fully-featured CMS with all amenities and a separate REST-module which handles all TODO list things including authorization. As I said, this chapter will mostly cover the tools needed for that and how to set them up. <em>"How to set them up, you say?"</em> - I will cover how <em>my</em> setup looks like, to be more concrete. Btw, I am a Windows user. I will not discuss why that is good or bad, but I want to mention that pretty much the whole tutorial is focusing on getting stuff done under windows (and a virtual machine). Furthermore it will show how to conveniently work under windows with your favorite IDE, but still using the power of Linux for development.</p></div></div></div></div><!-- /Intro --><!-- Callout --><div class="callout img-65H"><div class="vert-text"><h1>VirtualBox, LAMP and Samba</h1></div></div><!-- /Callout --><!-- Portfolio --><div class="container"><div class="row"><div class="col-md-8 col-md-offset-2"><h2 class="headliner">Setup.</h2><p class="lead">The Requirements...</p><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">tl;dr</h3></div><div class="panel-body"><ul><li>We are going to setup a LAMP Box here, to separate the server-services, make it moveable and so on. We are going to download, install and configure and LAMP-Appliance from TurnKey.</li><li>Then we install and configure <a href="http://pimcore.org" target="_blank">Pimcore</a>.</li><li>We also connect the Windows Machine via a NetDrive to the LAMP Box (samba), so we can use our favorite IDE to work there :)</li><li>And we connect with <a href="http://heidisql.com" target="_blank">HeidiSQL</a> to the MySQL Server to work graphically with the Database.</li></ul></div></div><h4>Virtual Box</h4><p>I personally prefer to have the php-part of the application neatly in their "natural environment". To be honest, while I think you theoretically could run everything completely under Windows, I strongly prefer to have that little Linux environment running, which does exactly what I want for the apache/php/mysql part. I therefore have downloaded a Turnkey Linux LAMB stack and setup everything php-related in there.</p><br><h4>Pimcore</h4><p><em>"What and why that?"</em> - you may ask, which is a legitimate question. I started programming with the Zend Framework quite a while ago and was since then looking for a CMS which clearly goes the "ZF-Way". I found my perfect candidate with <a href="http://pimcore.org" target="_blank">pimcore</a>. The outcome of this "ToDo" App will make full use of the Zend Framework 1.12 (yes yes, I know, why not ZF2? - ... well ... not yet) and also implements a simple landingpage utilizing the power of Pimcore's WYSIWYG CMS behavior. More on that later :).</p></div></div><div class="row"><div class="col-md-8 col-md-offset-2"><h2 class="headliner">Virtual Box.</h2><p class="lead">The Linux in a Box.</p><h4>LAMP Stack download and installation</h4><p>What exactly the Virtual Box is, is something I will not cover here. How you get it installed and an Apache/MySQL/PHP stack running and how to get access to the data, that in fact is the content of this tutorial.</p><p class="bg-success tutorialstep">The first step is to download the <a href="https://www.virtualbox.org/" target="_blank">Virtual Box</a> and install it.</p><p>Having that done, there are a variety of options available. You could go ahead and install a Linux distribution of your choice and install apache (or any other web-server) by hand, add php support. In this case, I like to use pre-configured, so called appliances, which you can download, import and basically just start and they are normally working out of the box. One, which I regularly use is the Turnkey Lamp appliance.</p><p class="bg-success tutorialstep">Download the <a href="http://www.turnkeylinux.org/lampstack" target="_blank">TurnKey LAMP stack</a>.</p><p>If you unzip the zip-file, then you get a .vmdk file. This is a virtual Hard-Drive, which can conveniently be imported into the VirtualBox. Create a new 64bit Ubuntu Virtual Machine in the VirtualBox and, instead of creating a new HardDrive use the .vmdk image. When I downloaded the VirtualBox image, it was a LAMP Stack 13.0 with Debian Wheezy. I had to create a 64-bit Ubuntu virtual machine for that, where the 64-bit things were initially not available, until I enabled the extended virtualization features in the BIOS. At the end also enable the second network-adapter and select a Host-Only network, which we will use to connect with ssh and samba on it. The first network adapter should stay at NAT.</p><p><img src="images/1a4d73a6.angular_1_1_virtualbox.png" class="img-responsive center-block"></p><p class="bg-success tutorialstep">Enable the second networkadapter and set it to "Host Only"</p><br><h4>Running and Configuration of the VM</h4><p>If you start up the new VM it asks you for a new root password and a new mysql-root password. <strong>Do not forget them!</strong> Basically you could use "1234" as password, because we will use that VM only for internal development and it will never be reached from the outside world (at least I would not advise to set a network bridge or something similar!). Having setup everything, you have a beautiful DOS-like on screen menu in blue. We will not use that. We are going to connect with ssh to the VM. If you don't have a shh client, I can recoomend either <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a> or <a href="http://www.9bis.net/kitty/?page=Download">Kitty</a>. Open Putty up, put in "root@192.168.56.101", select "ssh" and click "connect". Enter the password which you entered during setup and you should be in, which should look like that:</p><p><img src="images/aca4d4fc.angular_1_2_putty.png" class="img-responsive center-block"></p><p class="bg-success tutorialstep">You should be able to ssh to root@192.168.56.101</p><p>Here you go, your Linux in a Box. Now, the next step is to get access to the file system, configure apache and php and setup some development environment. To get access to the file-system I prefer to have that in my explorer as a net-drive. Therefore we install samba. Enter <kbd>apt-get update && apt-get install samba</kbd>, which should do the magic and install samba for you. I admit it, I can't work with the included VI, therefore I prefer to install <kbd>apt-get install vim</kbd>. Then you can open the samba configuration file in <kbd>vi /etc/samba/smb.conf</kbd>. Add the following at the end of the config-file. I will also give you some hints to use vim: press <kbd>i</kbd> to reach the <em>insert</em> - mode!<pre>
[samba]
path=/var/www
write list = @www-data
read only = no
guest ok = no
                    </pre>Then press <kbd>esc</kbd> to leave the insert-mode and just type <kbd>:wq</kbd> and hit return. That saves (w for write) and quits (q for quit) vim. Now lets add a samba user. I had additionally to install the <kbd>apt-get install samba-commons-bin</kbd> package in order to get the samba tools. Then simply type <kbd>smbpasswd -a www-data</kbd>, enter a password (I choose "1234" and it should add a user to the users-list. Then restart samba <kbd>service samba restart</kbd>. Then you can simply connect to the new net-drive. Hit <kbd><i class="fa fa-windows"></i>-R</kbd> to get the windows- "run" dialog and enter <kbd>net use y: \\192.168.56.101\samba 1234 /user:www-data /persistent:no</kbd>. That should bind the <samp>/var/www</samp> directory from the LAMP VM to the windows drive "Y:\".</p><p class="bg-success tutorialstep"><kbd>net use y: \\192.168.56.101\samba 1234 /user:www-data /persistent:no</kbd> should give you a netdrive on drive-Y.</p><br><h4>Conclusion</h4><p>Following the steps above should give you a Linux in a box with all amenities like a clear separation of data and service logic. Nothing is installed on the host system and you can eventually just move your development "platform" to a new computer, on a usb drive or wherever you want to. The next chapter will cover a basic introduction in Pimcore.</p><br></div></div></div><!-- Callout --><div class="callout img-47H"><div class="vert-text"><h1>Pimcore, HeidiSQL and more.</h1></div></div><!-- /Callout --><!-- Portfolio --><div class="container"><div class="row"><div class="col-md-8 col-md-offset-2"><h2 class="headliner">Pimcore.</h2><p class="lead">The ZF-Way CMS.</p><h4>Download and Setup</h4><p>Again, I will not cover here what awesome things Pimcore can do for you. The guys behind the system are pretty good in telling you the whole story on their <a href="http://pimcore.org" target="_blank">website</a>. First step is to <a href="http://www.pimcore.org/download/pimcore-latest.zip" target="_blank">download Pimcore</a>. Then switch over to your Putty, go to <kbd>cd /var/www</kbd>, remove everyhing in there by <kbd>rm -rf *</kbd>, then, additionally, change the owner of the directory to give it read/write access <kbd>chown -R 33:33 .</kbd>. Be careful that you are in the right directory ;). Now move the pimcore-latest.zip to your new Linux-Box by just moving it to the drive "Y" (with the Windows-Explorer to the net-drive we just connected). Then move back to your putty and extract it by <kbd>unzip pimcore-latest.zip</kbd>. Again, because you just extracted everything as the "root" user, change the owner back to the apache user (UID 33), so that apache has read/write access <kbd>chown -R 33:33 .</kbd>.</p><p class="bg-success tutorialstep"><a href="http://www.pimcore.org/download/pimcore-latest.zip" target="_blank">Download Pimcore</a> and extract it to your document root.</p><p>What we do next is connect to the MySQL Server and create a database, so we can insall Pimcore. We could do that by typing all the commands in putty directly into the shell. I personally prefer graphical tools for that. One of my favorite MySQL Clients is <a href="http://www.heidisql.com/" target="_blank">HeidiSQL</a>. Free and fast. After downloading it, it opens the "Session manager". Connecting to the new LAMP Box requires some configuration. We cannot directly connect to the box, because MySQL is listening only to the internal loopback interface. We have to create a so called ssh-tunnel, where HeidiSQL is connecting first via ssh, then tunneling through the loopback interface back to the windows-machine.</p><p>As a "Network Type" choose "MySQL (SSH tunnel)". Go to the second tab "SSH tunnel", download plink.exe if you haven't done yet, and give HeidiSQL the location. Then, as your SSH host type in "192.168.58.101", port "22". Username "root" and password, your root password, in my example its "1234". Eventually als set the plink timeout to 10 seconds, which happens to be one of the most cryptic error-messages sometimes if plink can't connect quick enough. Then go back to the "Settings"-tab and type in as username "root" and the MySQL root passord you typed in at the beginning of the setup (also "1234" in my example). It should look like that, just that your SSH-Tunnel IP address is "192.168.56.101" not ".102":<br><br><img src="images/291da062.angular_1_2_heidisql.png" class="img-responsive center-block"><br>and<br><br><img src="images/e0bd61d7.angular_1_2_heidisql_tunnel.png" class="img-responsive center-block"><br>You should be able to successfully connect to the MySQL Server on the LAMP Box. Then create a new database called "pim_db" by right-clicking on the session, choose "Create New" and "Database".<br><br><img src="images/cb6de66d.angular_1_2_heidisql_createdb.png" class="img-responsive center-block"><br><br>Type in "pim_db" and choose "utf8_general_ci" and Collation, if it isn't yet selected. Lets finish the last configuration on the LAMP Box, so that we can install Pimcore finally. We will not add another user (yet), because our development VM is completely separated from the outer world anyway, we can <em>can</em> use the root user. If you want make it properly, add an extra user with restricted permissions, so he has only access to the "pim_db" Database.</p><p class="bg-success tutorialstep">Create a database "pim_db". And eventually a separate user for the Pimcore installation.</p><p>Go back to putty. We have to enable mod_rewrite in order to use Pimcore. Type in <kbd>a2enmod rewrite</kbd> and <kbd>service apache2 restart</kbd>. Then go to <a href="http://192.168.56.101" target="_blank">"http://192.168.56.101"</a>. An installation-wizard should appear. Take "Pdo_Mysql" as adapter, "localhost" as Host, the MySQL user and password you either created, or "root" and "1234" if you followed this tutorial. Then "pim_db" as the database, choose an admin-password (for example "1234" to keep things simple). Hit "Install Now!".</p><p><img src="images/8047e699.angular_1_2_pim_install.png" class="img-responsive center-block"></p><p>After that, you should be able to login with your new credentials to Pimcore (admin and "1234" in my example).</p><h4>Conclusion</h4><p>Now, you have a feature-rich CMS on your completely separate LAMP Box. You have a convenient way to access the files via a net-drive and the database via SSH tunneling with a free and great MySQL Client. That was the goal for this tutorial. From here we can basically go ahead and start programming, which will be covered in the next tutorial.</p></div></div><div class="row"><div class="col-md-8 col-md-offset-2"><h2 class="headliner">Angular Development.</h2><p class="lead">The next steps.</p><h4>Node, Grunt, Bower and Yeoman</h4><p>In the next tutorial we will start writing an Angular-App. For that we will need some additional tools, which I will not cover here. There are great tutorials out there which show how to install these tools under windows (or any other operating system). Why I am not installing node-js in the LAMP box, could be a good question here. Now, we are going to write a 1-page app which should be able to run on a different domain (and basically from localhost). There are some challenges, which we will not have, if everything would run from the same domain (192.168.56.101 in that case). <a href="http://de.wikipedia.org/wiki/Cross-Origin_Resource_Sharing" target="_blank">CORS</a> is one of my favorite topics here :). Well, lets talk about that in the next tutorials ;).</p><ul><li>Frontend <a href="https://angularjs.org/" target="_blank">Angular</a>, which we build using <a href="https://github.com/yeoman/generator-angular" target="_blank">the generator-angular</a> for <a href="http://yeoman.io/" target="_blank">Yeoman</a> . To have a setup under windows for node.js and yeoman, bower and so on, I strongly suggest you to read <a href="http://plainaveragemind.wordpress.com/2013/09/04/angularjs-development-on-windows-with-yeoman-learning-angularjs-notes/" target="_blank">this tutorial</a>.</li><li>After you have setup everything go to the next tutorial and checkout what we can do with that :) [coming soon]</li></ul><p>If you have troubles installing node-js and the other tools, leave a comment. Eventually I will extend this tutorial.</p><p class="bg-success tutorialstep">Do what <a href="http://plainaveragemind.wordpress.com/2013/09/04/angularjs-development-on-windows-with-yeoman-learning-angularjs-notes/" target="_blank">this tutorial</a> tells you.</p><p>That's it for now. Thanks for reading and following. I would be happy to hear your progress in the comments.</p></div></div></div>